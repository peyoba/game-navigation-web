(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[331],{9162:function(e,t,r){Promise.resolve().then(r.bind(r,9399))},9399:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var a=r(7437),s=r(2265),n=r(3541),i=r(4645),l=r(4303),c=r(5820),o=r(6780);function d(){let{language:e}=(0,n.Z)(),[t,r]=(0,s.useState)([]),[d,m]=(0,s.useState)(!0),[h,x]=(0,s.useState)({nameZh:"",nameEn:"",order:0}),[g,u]=(0,s.useState)({nameZh:!1,nameEn:!1}),[p,f]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{try{m(!0);let e=(0,c.tG)();r(e.sort((e,t)=>e.order-t.order))}catch(e){console.error("Error fetching categories:",e)}finally{m(!1)}})()},[]);let y=e=>{let{name:t,value:r}=e.target;x({...h,[t]:"order"===t?parseInt(r)||0:r})},j=()=>{let e={nameZh:!h.nameZh.trim(),nameEn:!h.nameEn.trim()};return u(e),!Object.values(e).some(Boolean)},N=()=>{x({nameZh:"",nameEn:"",order:0}),u({nameZh:!1,nameEn:!1}),f(null)},b=e=>{x({nameZh:e.nameZh,nameEn:e.nameEn,order:e.order}),f(e.id)},v=t=>{if(window.confirm("zh"===e?"确定要删除此分类吗？":"Are you sure you want to delete this category?"))try{(0,c.uu)(t);let e=(0,c.tG)();r(e)}catch(e){console.error("Error deleting category:",e)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{}),(0,a.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)(o.Z,{}),(0,a.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6",children:p?"zh"===e?"编辑分类":"Edit Category":"zh"===e?"添加新分类":"Add New Category"}),(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),j())try{p?(0,c.yr)(p,h):(0,c.i8)(h);let e=(0,c.tG)();r(e.sort((e,t)=>e.order-t.order)),N()}catch(e){console.error("Error saving category:",e)}},children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:(0,a.jsx)(n.c,{children:"中文名称"})}),(0,a.jsx)("input",{type:"text",name:"nameZh",value:h.nameZh,onChange:y,className:"w-full p-2 border rounded-md ".concat(g.nameZh?"border-red-500":"border-gray-300"),placeholder:"zh"===e?"输入中文分类名称":"Enter Chinese category name"}),g.nameZh&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:(0,a.jsx)(n.c,{children:"请输入中文名称"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:(0,a.jsx)(n.c,{children:"英文名称"})}),(0,a.jsx)("input",{type:"text",name:"nameEn",value:h.nameEn,onChange:y,className:"w-full p-2 border rounded-md ".concat(g.nameEn?"border-red-500":"border-gray-300"),placeholder:"zh"===e?"输入英文分类名称":"Enter English category name"}),g.nameEn&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:(0,a.jsx)(n.c,{children:"请输入英文名称"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:(0,a.jsx)(n.c,{children:"排序"})}),(0,a.jsx)("input",{type:"number",name:"order",value:h.order,onChange:y,className:"w-full p-2 border border-gray-300 rounded-md",min:"0"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md transition",children:p?(0,a.jsx)(n.c,{children:"更新分类"}):(0,a.jsx)(n.c,{children:"添加分类"})}),p&&(0,a.jsx)("button",{type:"button",onClick:N,className:"bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded-md transition",children:(0,a.jsx)(n.c,{children:"取消"})})]})]})]}),(0,a.jsxs)("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold p-6 border-b",children:(0,a.jsx)(n.c,{children:"分类列表"})}),d?(0,a.jsxs)("div",{className:"text-center p-8",children:[(0,a.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-r-transparent align-[-0.125em]"}),(0,a.jsx)("p",{className:"mt-2",children:(0,a.jsx)(n.c,{children:"加载中..."})})]}):0===t.length?(0,a.jsx)("div",{className:"text-center p-8 text-gray-500",children:(0,a.jsx)(n.c,{children:"暂无分类数据"})}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,a.jsx)(n.c,{children:"中文名称"})}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,a.jsx)(n.c,{children:"英文名称"})}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,a.jsx)(n.c,{children:"排序"})}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,a.jsx)(n.c,{children:"操作"})})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.id}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.nameZh}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.nameEn}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.order}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,a.jsx)("button",{onClick:()=>b(e),className:"text-blue-600 hover:text-blue-900 mr-4",children:(0,a.jsx)(n.c,{children:"编辑"})}),(0,a.jsx)("button",{onClick:()=>v(e.id),className:"text-red-600 hover:text-red-900",children:(0,a.jsx)(n.c,{children:"删除"})})]})]},e.id))})]})})]})]}),(0,a.jsx)(l.Z,{})]})}},6780:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var a=r(7437),s=r(7648),n=r(3541),i=r(2454);function l(){let{language:e}=(0,n.Z)();return(0,a.jsx)("header",{className:"bg-indigo-600 shadow-sm",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-8",children:[(0,a.jsx)(s.default,{href:"/admin",className:"text-white font-bold text-xl",children:"zh"===e?"石头游戏站 - 管理后台":"Stone Games - Admin"}),(0,a.jsxs)("nav",{className:"flex space-x-4",children:[(0,a.jsx)(s.default,{href:"/admin",className:"text-indigo-100 hover:text-white px-3 py-2 rounded-md",children:"zh"===e?"游戏管理":"Games"}),(0,a.jsx)(s.default,{href:"/admin/categories",className:"text-indigo-100 hover:text-white px-3 py-2 rounded-md",children:"zh"===e?"分类管理":"Categories"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(i.Z,{}),(0,a.jsx)(s.default,{href:"/",className:"text-indigo-100 hover:text-white",children:"zh"===e?"返回网站":"Back to Site"})]})]})})})}},5820:function(e,t,r){"use strict";r.d(t,{Bi:function(){return d},TT:function(){return m},U:function(){return i},bg:function(){return c},cv:function(){return l},i8:function(){return x},s2:function(){return o},tG:function(){return h},uu:function(){return u},yr:function(){return g}});let a=[{id:1,titleZh:"2048",titleEn:"2048",descZh:"经典数字益智游戏，通过滑动合并相同的数字，目标是得到2048。",descEn:"The classic number puzzle game where you merge tiles with the same number by sliding them. Can you reach the elusive 2048 tile?",imageUrl:"https://play-lh.googleusercontent.com/g3RY-0qqhVvNj4vFqS9eZJMxOjEDmRxPGGXvqTX5nPHVqe1BGfNqpH-LZyN7pUVKKQ",gameUrl:"https://htmlgames.github.io/htmlgames/games/2048/index.html",categoryId:2,isActive:!0},{id:2,titleZh:"贪吃蛇",titleEn:"Snake",descZh:"控制蛇吃食物成长，不要撞到墙或自己。",descEn:"Control a growing snake as it moves around the screen eating food. Be careful not to crash into walls or your own tail!",imageUrl:"https://img.itch.zone/aW1nLzIyMTU1MDEucG5n/original/6vGlZe.png",gameUrl:"https://htmlgames.github.io/htmlgames/games/snake/index.html",categoryId:1,isActive:!0},{id:3,titleZh:"超级马里奥",titleEn:"Super Mario",descZh:"经典横版过关游戏，控制马里奥收集金币，打败怪物。",descEn:"The iconic platformer where you control Mario through various levels. Jump over obstacles, collect coins, and defeat enemies.",imageUrl:"https://assets.nintendo.com/image/upload/ar_16:9,b_auto:border,c_lpad/b_white/f_auto/q_auto/dpr_auto/c_scale,w_300/v1/ncom/en_US/games/switch/n/new-super-mario-bros-u-deluxe-switch/hero",gameUrl:"https://supermarioemulator.com/mario.php",categoryId:3,isActive:!0}],s=[{id:1,nameZh:"休闲游戏",nameEn:"Casual Games",order:1},{id:2,nameZh:"益智解谜",nameEn:"Puzzle Games",order:2},{id:3,nameZh:"动作游戏",nameEn:"Action Games",order:3}],n=()=>{localStorage.getItem("games")||localStorage.setItem("games",JSON.stringify(a)),localStorage.getItem("categories")||localStorage.setItem("categories",JSON.stringify(s))},i=()=>{n();let e=JSON.parse(localStorage.getItem("games")||"[]"),t=JSON.parse(localStorage.getItem("categories")||"[]");return e.map(e=>{let r=t.find(t=>t.id===e.categoryId);return{...e,category:r}})},l=()=>i().filter(e=>e.isActive),c=e=>i().find(t=>t.id===e)||null,o=e=>{n();let t=JSON.parse(localStorage.getItem("games")||"[]"),r=t.length>0?Math.max(...t.map(e=>e.id))+1:1,a={...e,id:r};return t.push(a),localStorage.setItem("games",JSON.stringify(t)),a},d=(e,t)=>{n();let r=JSON.parse(localStorage.getItem("games")||"[]"),a=r.findIndex(t=>t.id===e);if(-1===a)return null;let s={...r[a],...t};return r[a]=s,localStorage.setItem("games",JSON.stringify(r)),s},m=e=>{n();let t=JSON.parse(localStorage.getItem("games")||"[]"),r=t.filter(t=>t.id!==e);return r.length!==t.length&&(localStorage.setItem("games",JSON.stringify(r)),!0)},h=()=>(n(),JSON.parse(localStorage.getItem("categories")||"[]")),x=e=>{n();let t=JSON.parse(localStorage.getItem("categories")||"[]"),r=t.length>0?Math.max(...t.map(e=>e.id))+1:1,a={...e,id:r};return t.push(a),localStorage.setItem("categories",JSON.stringify(t)),a},g=(e,t)=>{n();let r=JSON.parse(localStorage.getItem("categories")||"[]"),a=r.findIndex(t=>t.id===e);if(-1===a)return null;let s={...r[a],...t};return r[a]=s,localStorage.setItem("categories",JSON.stringify(r)),s},u=e=>{n();let t=JSON.parse(localStorage.getItem("categories")||"[]"),r=t.filter(t=>t.id!==e);return r.length!==t.length&&(localStorage.setItem("categories",JSON.stringify(r)),!0)}}},function(e){e.O(0,[648,880,971,117,744],function(){return e(e.s=9162)}),_N_E=e.O()}]);